/* @theme: blank; */

.popup-gallery-widget {
    position: fixed;
    top: 0;
    left: 0;
    z-index: z('popup');

    width: 100%;
    height: 100%;

    opacity: 0;

    visibility: hidden;

    transition: .4s all;
    
    // Slick slider customization
    @include slick-arrow(
        $slick-arrow-width: $popup-gallery-widget-arrow-width,
        $slick-arrow-height: $popup-gallery-widget-arrow-height,
        $slick-arrow-outline: none,
        $slick-arrow-border-radius: $popup-gallery-widget-arrow-border-radius,
        $slick-arrow-background: $popup-gallery-widget-arrow-bg,
        $slick-arrow-icon-size: $popup-gallery-widget-arrow-icon-size,
        $slick-arrow-icon-color: $popup-gallery-widget-arrow-icon-color,
        $slick-arrow-icon-hover-color: null,
        $slick-arrow-prev-left: $popup-gallery-widget-arrow-side-position,
        $slick-arrow-next-right: $popup-gallery-widget-arrow-side-position,
        $slick-arrow-prev-icon: $popup-gallery-widget-arrow-prev-icon,
        $slick-arrow-next-icon: $popup-gallery-widget-arrow-next-icon,
        $slick-arrow-prev-icon-offset: $popup-gallery-widget-arrow-prev-icon-offset,
        $slick-arrow-next-icon-offset: $popup-gallery-widget-arrow-next-icon-offset
    );

    .slick-no-slide {
        max-width: $popup-gallery-widget-no-slide-max-width;
        padding: 0;

        .slick-track {
            width: 100% !important;

            text-align: center;

            transform: inherit !important;
        }

        .slick-slide {
            display: inline-block;
            float: none;
        }

        .slick-list {
            max-width: $popup-gallery-widget-no-slide-list-max-width;
            padding: 0 !important;
        }
    }

    // Gallery styles
    &__overlay {
        position: absolute;
        top: 0;
        left: 0;

        width: 100%;
        height: 100%;

        background: $popup-gallery-widget-overlay-bg;
    }

    &__wrapper {
        position: relative;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);

        max-width: $popup-gallery-widget-wrapper-max-width;
        max-height: $popup-gallery-widget-wrapper-max-height;
        padding: 0;
    }

    &__close {
        position: absolute;
        right: $popup-gallery-widget-close-top-right-pos;
        top: $popup-gallery-widget-close-top-right-pos;
        z-index: z('base');

        width: $popup-gallery-widget-close-width;
        height: $popup-gallery-widget-close-height;
        padding: 0;

        text-align: center;

        background: $popup-gallery-widget-close-bg;
        border: $popup-gallery-widget-close-border;

        border-radius: $popup-gallery-widget-close-border-radius;
        cursor: pointer;

        @include fa-icon($popup-gallery-widget-close-icon);

        &:before {
            display: inline-block;
            margin: $popup-gallery-widget-close-icon-offset;

            font-size: $popup-gallery-widget-close-icon-size;
            line-height: $popup-gallery-widget-close-height;

            color: $popup-gallery-widget-close-icon-color;
        }
    }

    &__images {
        margin-bottom: $popup-gallery-widget-images-offset-bottom;

        transition: all .4s;
        opacity: 0;
        visibility: hidden;

        .slick-list {
            border: $popup-gallery-widget-slick-list-border;
            background: $popup-gallery-widget-slick-list-bg;
        }

        @include slick-dots();

        .slick-dots {
            display: none !important;
        }
    }

    &__image {
        height: auto;
        min-height: 100%;

        img {
            width: 100%;
            height: 100%;
        }

        .slick-loading {
            min-width: 200px;
            min-height: 200px;

            background: get-color('additional', 'ultra') url($popup-gallery-loader-url) no-repeat 50% 50%;
        }
    }

    &__thumbnails {
        width: 100%;

        padding: $popup-gallery-widget-thumbnails-offset-inner;

        text-align: center;

        opacity: 0;
        visibility: hidden;

        @include slick-arrow(
            $slick-arrow-width: $popup-gallery-widget-thumbnail-arrow-width,
            $slick-arrow-height: $popup-gallery-widget-thumbnail-arrow-height,
            $slick-arrow-icon-size: $popup-gallery-widget-thumbnail-arrow-icon-size,
            $slick-arrow-next-right: $popup-gallery-widget-thumbnail-arrow-side-position,
            $slick-arrow-prev-left: $popup-gallery-widget-thumbnail-arrow-side-position
        );

        &-img {
            margin: $popup-gallery-widget-thumbnails-img-offset;

            text-align: center;

            &.slick-current {
                position: relative;
            }

            img {
                border: $popup-gallery-widget-thumbnails-img-border;
            }

            &.slick-current img {
                border: $popup-gallery-widget-thumbnails-img-active-border;
            }
        }
    }

    &--opened,
    &--opened &__images.slick-initialized,
    &--opened &__thumbnails.slick-initialized {
        opacity: 1;
        visibility: visible;
    }
}

.gallery-popup-opened {
    overflow: hidden !important;

    .zoomContainer {
        display: none;
    }
}

@include breakpoint('popup-gallery-tablet') {
    .popup-gallery-widget {
        &__thumbnails {
            display: none;
        }

        &__close {
            right: $popup-gallery-widget-close-top-right-pos-tablet-small;
            top: $popup-gallery-widget-close-top-right-pos-tablet-small;
        }

        &__images {
            .slick-list {
                border: 0;
            }

            .slick-arrow {
                // break inline styles
                display: none !important;
            }

            .slick-dots {
                display: inline-block !important;
            }
        }

        &__image {
            img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                margin: auto;
            }
        }

        &__wrapper {
            // square popup wrapper and compensation url bar on safari iOS
            max-width: 75vmin;
            max-height: 75vmin;
        }
    }
}
