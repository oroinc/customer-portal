parameters:
#    Set this parameter to true to enable absolute URLs for attachment images and CMS assets in API responses
    oro_frontend.frontend_api.use_absolute_urls_for_api: false

services:
    oro_frontend_attachment.api.processor.initialize_absolute_url_flag:
        class: Oro\Bundle\ApiBundle\Processor\InitializeAbsoluteUrlFlag
        arguments:
            - '@request_stack'
            - '%oro_frontend.frontend_api.use_absolute_urls_for_api%'
        tags:
            - { name: oro.api.processor, action: get, group: initialize, requestType: frontend, priority: 250 }
            - { name: oro.api.processor, action: get_list, group: initialize, requestType: frontend, priority: 250 }

    oro_frontend_attachment.api.processor.convert_product_search_image_urls_to_absolute:
        class: Oro\Bundle\FrontendAttachmentBundle\Api\Processor\ConvertProductSearchImageUrlsToAbsolute
        arguments:
            - '@oro_ui.tools.url_helper'
            - '@oro_api.provider.api_url_resolver'
        tags:
            - { name: oro.api.processor, action: customize_loaded_data, requestType: frontend, class: Oro\Bundle\ProductBundle\Api\Model\ProductSearch, priority: 10 }
