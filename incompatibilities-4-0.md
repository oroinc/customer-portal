- [CommerceMenuBundle](#commercemenubundle)
- [CustomerBundle](#customerbundle)
- [FrontendBundle](#frontendbundle)
- [WebsiteBundle](#websitebundle)

CommerceMenuBundle
------------------
* The `NamespaceMigrationProvider`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CommerceMenuBundle/CacheWarmer/NamespaceMigrationProvider.php#L7 "Oro\Bundle\CommerceMenuBundle\CacheWarmer\NamespaceMigrationProvider")</sup> class was removed.
* The `MenuExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CommerceMenuBundle/Twig/MenuExtension.php#L24 "Oro\Bundle\CommerceMenuBundle\Twig\MenuExtension")</sup> method was changed to `MenuExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CommerceMenuBundle/Twig/MenuExtension.php#L29 "Oro\Bundle\CommerceMenuBundle\Twig\MenuExtension")</sup>
* The `CustomerAjaxMenuController::getMenuUpdateManager`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CommerceMenuBundle/Controller/CustomerAjaxMenuController.php#L46 "Oro\Bundle\CommerceMenuBundle\Controller\CustomerAjaxMenuController::getMenuUpdateManager")</sup> method was removed.
* The `CustomerGroupAjaxMenuController::getMenuUpdateManager`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CommerceMenuBundle/Controller/CustomerGroupAjaxMenuController.php#L59 "Oro\Bundle\CommerceMenuBundle\Controller\CustomerGroupAjaxMenuController::getMenuUpdateManager")</sup> method was removed.
* The `GlobalAjaxMenuController::getMenuUpdateManager`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CommerceMenuBundle/Controller/GlobalAjaxMenuController.php#L29 "Oro\Bundle\CommerceMenuBundle\Controller\GlobalAjaxMenuController::getMenuUpdateManager")</sup> method was removed.

CustomerBundle
--------------
* The `CircularCustomerReferenceValidator::isAncestor`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Validator/Constraints/CircularCustomerReferenceValidator.php#L31 "Oro\Bundle\CustomerBundle\Validator\Constraints\CircularCustomerReferenceValidator::isAncestor")</sup> method was removed.
* The `FrontendOwnerTreeProvider::getOwnershipMetadataProvider`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Owner/FrontendOwnerTreeProvider.php#L182 "Oro\Bundle\CustomerBundle\Owner\FrontendOwnerTreeProvider::getOwnershipMetadataProvider")</sup> method was removed.
* The `AbstractCustomerUserRoleHandler::processPrivileges`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Handler/AbstractCustomerUserRoleHandler.php#L113 "Oro\Bundle\CustomerBundle\Form\Handler\AbstractCustomerUserRoleHandler::processPrivileges")</sup> method was removed.
* The following methods in class `CustomerUserManager`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L86 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager")</sup> were removed:
   - `setLogger`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L86 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::setLogger")</sup>
   - `sendWelcomeEmail`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L135 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::sendWelcomeEmail")</sup>
   - `generatePassword`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L197 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::generatePassword")</sup>
   - `getConfigValue`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L210 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::getConfigValue")</sup>
   - `generateToken`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L234 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::generateToken")</sup>
   - `setContainer`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L242 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::setContainer")</sup>
   - `findUserByUsername`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L268 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::findUserByUsername")</sup>
   - `isCaseInsensitiveEmailAddressesEnabled`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L286 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::isCaseInsensitiveEmailAddressesEnabled")</sup>
* The following methods in class `CustomerVoter`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L69 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter")</sup> were removed:
   - `setContainer`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L69 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter::setContainer")</sup>
   - `getContainer`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L77 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter::getContainer")</sup>
   - `getSecurityProvider`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L270 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter::getSecurityProvider")</sup>
   - `getAuthenticationTrustResolver`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L278 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter::getAuthenticationTrustResolver")</sup>
   - `getAuthorizationChecker`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L286 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter::getAuthorizationChecker")</sup>
   - `getRelationsProvider`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L294 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter::getRelationsProvider")</sup>
* The `EmailCaseInsensitiveOptionValidator::__construct(CustomerUserManager $userManager, TranslatorInterface $translator, DatagridRouteHelper $datagridRouteHelper)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Validator/Constraints/EmailCaseInsensitiveOptionValidator.php#L37 "Oro\Bundle\CustomerBundle\Validator\Constraints\EmailCaseInsensitiveOptionValidator")</sup> method was changed to `EmailCaseInsensitiveOptionValidator::__construct(ManagerRegistry $doctrine, TranslatorInterface $translator, DatagridRouteHelper $datagridRouteHelper)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Validator/Constraints/EmailCaseInsensitiveOptionValidator.php#L38 "Oro\Bundle\CustomerBundle\Validator\Constraints\EmailCaseInsensitiveOptionValidator")</sup>
* The `CustomerExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Twig/CustomerExtension.php#L18 "Oro\Bundle\CustomerBundle\Twig\CustomerExtension")</sup> method was changed to `CustomerExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Twig/CustomerExtension.php#L25 "Oro\Bundle\CustomerBundle\Twig\CustomerExtension")</sup>
* The `FrontendOwnerTreeProvider::getId($item, $property)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Owner/FrontendOwnerTreeProvider.php#L135 "Oro\Bundle\CustomerBundle\Owner\FrontendOwnerTreeProvider")</sup> method was changed to `FrontendOwnerTreeProvider::getId($item, $property)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Owner/FrontendOwnerTreeProvider.php#L140 "Oro\Bundle\CustomerBundle\Owner\FrontendOwnerTreeProvider")</sup>
* The `ExtendCustomerUserRole::__construct($role = null)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Model/ExtendCustomerUserRole.php#L18 "Oro\Bundle\CustomerBundle\Model\ExtendCustomerUserRole")</sup> method was changed to `ExtendCustomerUserRole::__construct($role)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Model/ExtendCustomerUserRole.php#L18 "Oro\Bundle\CustomerBundle\Model\ExtendCustomerUserRole")</sup>
* The `FrontendCustomerUserRegistrationFormProvider::__construct(FormFactoryInterface $formFactory, ConfigManager $configManager, WebsiteManager $websiteManager, UserManager $userManager, UrlGeneratorInterface $router)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Layout/DataProvider/FrontendCustomerUserRegistrationFormProvider.php#L42 "Oro\Bundle\CustomerBundle\Layout\DataProvider\FrontendCustomerUserRegistrationFormProvider")</sup> method was changed to `FrontendCustomerUserRegistrationFormProvider::__construct(FormFactoryInterface $formFactory, ConfigManager $configManager, WebsiteManager $websiteManager, ManagerRegistry $doctrine, UrlGeneratorInterface $router)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Layout/DataProvider/FrontendCustomerUserRegistrationFormProvider.php#L42 "Oro\Bundle\CustomerBundle\Layout\DataProvider\FrontendCustomerUserRegistrationFormProvider")</sup>
* The `FrontendCustomerUserRoleTabOptionsProvider::__construct(RolePrivilegeCategoryProvider $permissionCategoryProvider, TranslatorInterface $translator, AbstractCustomerUserRoleHandler $aclRoleHandler)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Layout/DataProvider/FrontendCustomerUserRoleTabOptionsProvider.php#L43 "Oro\Bundle\CustomerBundle\Layout\DataProvider\FrontendCustomerUserRoleTabOptionsProvider")</sup> method was changed to `FrontendCustomerUserRoleTabOptionsProvider::__construct(RolePrivilegeCategoryProvider $permissionCategoryProvider, TranslatorInterface $translator, AbstractCustomerUserRoleHandler $aclRoleHandler)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Layout/DataProvider/FrontendCustomerUserRoleTabOptionsProvider.php#L43 "Oro\Bundle\CustomerBundle\Layout\DataProvider\FrontendCustomerUserRoleTabOptionsProvider")</sup>
* The `ImportCustomerUserListener::__construct(ManagerRegistry $registry, CustomerUserManager $customerUserManager, TranslatorInterface $translator, ImportStrategyHelper $strategyHelper)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/ImportExport/Strategy/EventListener/ImportCustomerUserListener.php#L46 "Oro\Bundle\CustomerBundle\ImportExport\Strategy\EventListener\ImportCustomerUserListener")</sup> method was changed to `ImportCustomerUserListener::__construct(ManagerRegistry $registry, CustomerUserManager $customerUserManager, TranslatorInterface $translator, ImportStrategyHelper $strategyHelper)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/ImportExport/Strategy/EventListener/ImportCustomerUserListener.php#L46 "Oro\Bundle\CustomerBundle\ImportExport\Strategy\EventListener\ImportCustomerUserListener")</sup>
* The `CustomerRegistrationHandler::__construct(FrontendCustomerUserRegistrationFormProvider $formProvider, CustomerUserManager $customerUserManager, FrontendCustomerUserHandler $customerUserHandler, UpdateHandlerFacade $updateHandler, TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Handler/CustomerRegistrationHandler.php#L56 "Oro\Bundle\CustomerBundle\Handler\CustomerRegistrationHandler")</sup> method was changed to `CustomerRegistrationHandler::__construct(FrontendCustomerUserRegistrationFormProvider $formProvider, CustomerUserManager $customerUserManager, FrontendCustomerUserHandler $customerUserHandler, UpdateHandlerFacade $updateHandler, TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Handler/CustomerRegistrationHandler.php#L56 "Oro\Bundle\CustomerBundle\Handler\CustomerRegistrationHandler")</sup>
* The `CustomerTypedAddressWithDefaultType::__construct(TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Type/CustomerTypedAddressWithDefaultType.php#L28 "Oro\Bundle\CustomerBundle\Form\Type\CustomerTypedAddressWithDefaultType")</sup> method was changed to `CustomerTypedAddressWithDefaultType::__construct(TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Form/Type/CustomerTypedAddressWithDefaultType.php#L28 "Oro\Bundle\CustomerBundle\Form\Type\CustomerTypedAddressWithDefaultType")</sup>
* The `CustomerUserRoleSelectType::__construct(TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Type/CustomerUserRoleSelectType.php#L23 "Oro\Bundle\CustomerBundle\Form\Type\CustomerUserRoleSelectType")</sup> method was changed to `CustomerUserRoleSelectType::__construct(TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Form/Type/CustomerUserRoleSelectType.php#L23 "Oro\Bundle\CustomerBundle\Form\Type\CustomerUserRoleSelectType")</sup>
* The `FrontendCustomerUserRegistrationType::__construct(ConfigManager $configManager, UserManager $userManager)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Type/FrontendCustomerUserRegistrationType.php#L43 "Oro\Bundle\CustomerBundle\Form\Type\FrontendCustomerUserRegistrationType")</sup> method was changed to `FrontendCustomerUserRegistrationType::__construct(ConfigManager $configManager, ManagerRegistry $doctrine)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Form/Type/FrontendCustomerUserRegistrationType.php#L40 "Oro\Bundle\CustomerBundle\Form\Type\FrontendCustomerUserRegistrationType")</sup>
* The `FrontendCustomerUserType::__construct(AuthorizationCheckerInterface $authorizationChecker, TokenAccessorInterface $tokenAccessor)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Type/FrontendCustomerUserType.php#L31 "Oro\Bundle\CustomerBundle\Form\Type\FrontendCustomerUserType")</sup> method was changed to `FrontendCustomerUserType::__construct(AuthorizationCheckerInterface $authorizationChecker, TokenAccessorInterface $tokenAccessor, WebsiteManager $websiteManager)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Form/Type/FrontendCustomerUserType.php#L39 "Oro\Bundle\CustomerBundle\Form\Type\FrontendCustomerUserType")</sup>
* The `CustomerUserHandler::__construct(FormInterface $form, Request $request, CustomerUserManager $userManager, TokenAccessorInterface $tokenAccessor, TranslatorInterface $translator, LoggerInterface $logger)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Handler/CustomerUserHandler.php#L48 "Oro\Bundle\CustomerBundle\Form\Handler\CustomerUserHandler")</sup> method was changed to `CustomerUserHandler::__construct(FormInterface $form, Request $request, CustomerUserManager $userManager, TokenAccessorInterface $tokenAccessor, TranslatorInterface $translator, LoggerInterface $logger)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Form/Handler/CustomerUserHandler.php#L48 "Oro\Bundle\CustomerBundle\Form\Handler\CustomerUserHandler")</sup>
* The `CustomerUserPasswordRequestHandler::__construct(CustomerUserManager $userManager, TranslatorInterface $translator, LoggerInterface $logger)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Handler/CustomerUserPasswordRequestHandler.php#L32 "Oro\Bundle\CustomerBundle\Form\Handler\CustomerUserPasswordRequestHandler")</sup> method was changed to `CustomerUserPasswordRequestHandler::__construct(CustomerUserManager $userManager, TranslatorInterface $translator, LoggerInterface $logger)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Form/Handler/CustomerUserPasswordRequestHandler.php#L32 "Oro\Bundle\CustomerBundle\Form\Handler\CustomerUserPasswordRequestHandler")</sup>
* The following methods in class `CustomerRolePageListener`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/EventListener/CustomerRolePageListener.php#L27 "Oro\Bundle\CustomerBundle\EventListener\CustomerRolePageListener")</sup> were changed:
  > - `__construct(TranslatorInterface $translator, RequestStack $requestStack)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/EventListener/CustomerRolePageListener.php#L23 "Oro\Bundle\CustomerBundle\EventListener\CustomerRolePageListener")</sup>
  > - `__construct(TranslatorInterface $translator, RequestStack $requestStack)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/EventListener/CustomerRolePageListener.php#L27 "Oro\Bundle\CustomerBundle\EventListener\CustomerRolePageListener")</sup>

  > - `addWorkflowAclDatagrid($pageData, Twig_Environment $twigEnvironment, CustomerUserRole $entity, $readOnly)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/EventListener/CustomerRolePageListener.php#L99 "Oro\Bundle\CustomerBundle\EventListener\CustomerRolePageListener")</sup>
  > - `addWorkflowAclDatagrid($pageData, Environment $twigEnvironment, CustomerUserRole $entity, $readOnly)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/EventListener/CustomerRolePageListener.php#L103 "Oro\Bundle\CustomerBundle\EventListener\CustomerRolePageListener")</sup>

* The `CustomerUserManager::__construct($class, ManagerRegistry $registry, EncoderFactoryInterface $encoderFactory, FrontendHelper $frontendHelper, LocalizationHelper $localizationHelper, WebsiteManager $websiteManager)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L68 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager")</sup> method was changed to `CustomerUserManager::__construct(UserLoaderInterface $userLoader, ManagerRegistry $doctrine, EncoderFactoryInterface $encoderFactory, ConfigManager $configManager, ServiceLink $emailProcessor, FrontendHelper $frontendHelper, LocalizationHelper $localizationHelper, WebsiteManager $websiteManager, LoggerInterface $logger)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L54 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager")</sup>
* The `CustomerUserRole::__construct($role = null)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserRole.php#L161 "Oro\Bundle\CustomerBundle\Entity\CustomerUserRole")</sup> method was changed to `CustomerUserRole::__construct($role)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserRole.php#L161 "Oro\Bundle\CustomerBundle\Entity\CustomerUserRole")</sup>
* The `RolePermissionDatasource::__construct(TranslatorInterface $translator, PermissionManager $permissionManager, AclRoleHandler $aclRoleHandler, RolePrivilegeCategoryProvider $categoryProvider, ConfigManager $configEntityManager, RoleTranslationPrefixResolver $roleTranslationPrefixResolver)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Datagrid/RolePermissionDatasource.php#L26 "Oro\Bundle\CustomerBundle\Datagrid\RolePermissionDatasource")</sup> method was changed to `RolePermissionDatasource::__construct(TranslatorInterface $translator, PermissionManager $permissionManager, AclRoleHandler $aclRoleHandler, RolePrivilegeCategoryProvider $categoryProvider, ConfigManager $configEntityManager, RoleTranslationPrefixResolver $roleTranslationPrefixResolver)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Datagrid/RolePermissionDatasource.php#L26 "Oro\Bundle\CustomerBundle\Datagrid\RolePermissionDatasource")</sup>
* The `WorkflowPermissionDatasource::__construct(TranslatorInterface $translator, PermissionManager $permissionManager, AclRoleHandler $aclRoleHandler, RolePrivilegeCategoryProvider $categoryProvider, ConfigManager $configEntityManager, RoleTranslationPrefixResolver $roleTranslationPrefixResolver)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Datagrid/WorkflowPermissionDatasource.php#L26 "Oro\Bundle\CustomerBundle\Datagrid\WorkflowPermissionDatasource")</sup> method was changed to `WorkflowPermissionDatasource::__construct(TranslatorInterface $translator, PermissionManager $permissionManager, AclRoleHandler $aclRoleHandler, RolePrivilegeCategoryProvider $categoryProvider, ConfigManager $configEntityManager, RoleTranslationPrefixResolver $roleTranslationPrefixResolver)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Datagrid/WorkflowPermissionDatasource.php#L26 "Oro\Bundle\CustomerBundle\Datagrid\WorkflowPermissionDatasource")</sup>
* The `CustomersEnableSwitchActionHandler::__construct(AclHelper $aclHelper, TokenStorageInterface $tokenStorage, TranslatorInterface $translator, $isEnabled, $successMessage, $errorMessage)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Datagrid/Extension/MassAction/CustomersEnableSwitchActionHandler.php#L48 "Oro\Bundle\CustomerBundle\Datagrid\Extension\MassAction\CustomersEnableSwitchActionHandler")</sup> method was changed to `CustomersEnableSwitchActionHandler::__construct(AclHelper $aclHelper, TokenStorageInterface $tokenStorage, TranslatorInterface $translator, $isEnabled, $successMessage, $errorMessage)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Datagrid/Extension/MassAction/CustomersEnableSwitchActionHandler.php#L48 "Oro\Bundle\CustomerBundle\Datagrid\Extension\MassAction\CustomersEnableSwitchActionHandler")</sup>
* The `SecurityController::checkAction()`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Controller/SecurityController.php#L42 "Oro\Bundle\CustomerBundle\Controller\SecurityController")</sup> method was changed to `SecurityController::checkAction(Request $request)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Controller/SecurityController.php#L52 "Oro\Bundle\CustomerBundle\Controller\SecurityController")</sup>
* The `HandleLogin::__construct($authenticationProviderKey, AuthenticationProviderInterface $authenticationProvider, ConfigManager $configManager, DoctrineHelper $doctrineHelper, TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Api/Processor/HandleLogin.php#L48 "Oro\Bundle\CustomerBundle\Api\Processor\HandleLogin")</sup> method was changed to `HandleLogin::__construct($authenticationProviderKey, AuthenticationProviderInterface $authenticationProvider, ConfigManager $configManager, DoctrineHelper $doctrineHelper, TranslatorInterface $translator)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Api/Processor/HandleLogin.php#L48 "Oro\Bundle\CustomerBundle\Api\Processor\HandleLogin")</sup>
* The `CustomerVoter::__construct(DoctrineHelper $doctrineHelper, AuthenticationTrustResolverInterface $authenticationTrustResolver)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L58 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter")</sup> method was changed to `CustomerVoter::__construct(DoctrineHelper $doctrineHelper, AuthenticationTrustResolverInterface $authenticationTrustResolver, AuthorizationCheckerInterface $authorizationChecker, CustomerUserProvider $customerUserProvider, CustomerUserRelationsProvider $customerUserRelationsProvider)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/CustomerBundle/Acl/Voter/CustomerVoter.php#L70 "Oro\Bundle\CustomerBundle\Acl\Voter\CustomerVoter")</sup>
* The `FrontendCustomerUserRegistrationType::$userManager`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Form/Type/FrontendCustomerUserRegistrationType.php#L32 "Oro\Bundle\CustomerBundle\Form\Type\FrontendCustomerUserRegistrationType::$userManager")</sup> property was removed.
* The following properties in class `CustomerUserManager`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L33 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager")</sup> were removed:
   - `$emailProcessor`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L33 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::$emailProcessor")</sup>
   - `$container`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/CustomerBundle/Entity/CustomerUserManager.php#L43 "Oro\Bundle\CustomerBundle\Entity\CustomerUserManager::$container")</sup>

FrontendBundle
--------------
* The following classes were removed:
   - `FileExtension`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Twig/FileExtension.php#L8 "Oro\Bundle\FrontendBundle\Twig\FileExtension")</sup>
   - `ThemeFilter`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Placeholder/ThemeFilter.php#L8 "Oro\Bundle\FrontendBundle\Placeholder\ThemeFilter")</sup>
   - `AttachmentManager`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Manager/AttachmentManager.php#L7 "Oro\Bundle\FrontendBundle\Manager\AttachmentManager")</sup>
   - `ScreensConfiguration`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/DependencyInjection/ScreensConfiguration.php#L15 "Oro\Bundle\FrontendBundle\DependencyInjection\ScreensConfiguration")</sup>
   - `NamespaceMigrationFixProductProvider`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/CacheWarmer/NamespaceMigrationFixProductProvider.php#L7 "Oro\Bundle\FrontendBundle\CacheWarmer\NamespaceMigrationFixProductProvider")</sup>
   - `NamespaceMigrationProvider`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/CacheWarmer/NamespaceMigrationProvider.php#L7 "Oro\Bundle\FrontendBundle\CacheWarmer\NamespaceMigrationProvider")</sup>
* The `FrontendHelper::__construct($backendPrefix, ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Request/FrontendHelper.php#L24 "Oro\Bundle\FrontendBundle\Request\FrontendHelper")</sup> method was changed to `FrontendHelper::__construct($backendPrefix, RequestStack $requestStack)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/FrontendBundle/Request/FrontendHelper.php#L23 "Oro\Bundle\FrontendBundle\Request\FrontendHelper")</sup>
* The `ActivityListPlaceholderFilter::__construct(PlaceholderFilter $filter, FrontendHelper $helper, RequestStack $requestStack)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Placeholder/ActivityListPlaceholderFilter.php#L32 "Oro\Bundle\FrontendBundle\Placeholder\ActivityListPlaceholderFilter")</sup> method was changed to `ActivityListPlaceholderFilter::__construct(PlaceholderFilter $filter, FrontendHelper $helper)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/FrontendBundle/Placeholder/ActivityListPlaceholderFilter.php#L25 "Oro\Bundle\FrontendBundle\Placeholder\ActivityListPlaceholderFilter")</sup>
* The `FrontendFilter::__construct(FrontendHelper $helper, RequestStack $requestStack)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Placeholder/FrontendFilter.php#L24 "Oro\Bundle\FrontendBundle\Placeholder\FrontendFilter")</sup> method was changed to `FrontendFilter::__construct(FrontendHelper $helper)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/FrontendBundle/Placeholder/FrontendFilter.php#L19 "Oro\Bundle\FrontendBundle\Placeholder\FrontendFilter")</sup>
* The `GuestAccessRequestListener::__construct(TokenAccessorInterface $tokenAccessor, ConfigManager $configManager, GuestAccessDecisionMakerInterface $guestAccessDeniedDecisionMaker, RouterInterface $router)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/EventListener/GuestAccessRequestListener.php#L48 "Oro\Bundle\FrontendBundle\EventListener\GuestAccessRequestListener")</sup> method was changed to `GuestAccessRequestListener::__construct(TokenAccessorInterface $tokenAccessor, ConfigManager $configManager, GuestAccessDecisionMakerInterface $guestAccessDeniedDecisionMaker, RouterInterface $router, $restApiPrefix)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/FrontendBundle/EventListener/GuestAccessRequestListener.php#L58 "Oro\Bundle\FrontendBundle\EventListener\GuestAccessRequestListener")</sup>
* The `FrontendJsRoutingDumpCommand::__construct(ExposedRoutesExtractorInterface $extractor, SerializerInterface $serializer, $projectDir, $requestContextBaseUrl = null)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Command/FrontendJsRoutingDumpCommand.php#L27 "Oro\Bundle\FrontendBundle\Command\FrontendJsRoutingDumpCommand")</sup> method was changed to `FrontendJsRoutingDumpCommand::__construct(ExposedRoutesExtractorInterface $extractor, SerializerInterface $serializer, $projectDir, $requestContextBaseUrl = null, $backendFilenamePrefix)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/FrontendBundle/Command/FrontendJsRoutingDumpCommand.php#L31 "Oro\Bundle\FrontendBundle\Command\FrontendJsRoutingDumpCommand")</sup>
* The `FrontendHelper::$container`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Request/FrontendHelper.php#L18 "Oro\Bundle\FrontendBundle\Request\FrontendHelper::$container")</sup> property was removed.
* The `ActivityListPlaceholderFilter::$requestStack`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Placeholder/ActivityListPlaceholderFilter.php#L25 "Oro\Bundle\FrontendBundle\Placeholder\ActivityListPlaceholderFilter::$requestStack")</sup> property was removed.
* The `FrontendFilter::$requestStack`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Placeholder/FrontendFilter.php#L18 "Oro\Bundle\FrontendBundle\Placeholder\FrontendFilter::$requestStack")</sup> property was removed.
* The `ActivityListPlaceholderFilter::isFrontendRoute`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/Placeholder/ActivityListPlaceholderFilter.php#L70 "Oro\Bundle\FrontendBundle\Placeholder\ActivityListPlaceholderFilter::isFrontendRoute")</sup> method was removed.
* The following methods in class `OroFrontendExtension`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/DependencyInjection/OroFrontendExtension.php#L89 "Oro\Bundle\FrontendBundle\DependencyInjection\OroFrontendExtension")</sup> were removed:
   - `prependScreensConfigs`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/DependencyInjection/OroFrontendExtension.php#L89 "Oro\Bundle\FrontendBundle\DependencyInjection\OroFrontendExtension::prependScreensConfigs")</sup>
   - `loadScreensConfigResources`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/DependencyInjection/OroFrontendExtension.php#L112 "Oro\Bundle\FrontendBundle\DependencyInjection\OroFrontendExtension::loadScreensConfigResources")</sup>
   - `getScreensConfigArray`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/FrontendBundle/DependencyInjection/OroFrontendExtension.php#L133 "Oro\Bundle\FrontendBundle\DependencyInjection\OroFrontendExtension::getScreensConfigArray")</sup>

WebsiteBundle
-------------
* The `OroWebsiteExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/WebsiteBundle/Twig/OroWebsiteExtension.php#L19 "Oro\Bundle\WebsiteBundle\Twig\OroWebsiteExtension")</sup> method was changed to `OroWebsiteExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/WebsiteBundle/Twig/OroWebsiteExtension.php#L26 "Oro\Bundle\WebsiteBundle\Twig\OroWebsiteExtension")</sup>
* The `WebsitePathExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/WebsiteBundle/Twig/WebsitePathExtension.php#L22 "Oro\Bundle\WebsiteBundle\Twig\WebsitePathExtension")</sup> method was changed to `WebsitePathExtension::__construct(ContainerInterface $container)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/WebsiteBundle/Twig/WebsitePathExtension.php#L27 "Oro\Bundle\WebsiteBundle\Twig\WebsitePathExtension")</sup>
* The `WebsiteScopedDataType::__construct(ManagerRegistry $registry, WebsiteProviderInterface $websiteProvider)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/WebsiteBundle/Form/Type/WebsiteScopedDataType.php#L65 "Oro\Bundle\WebsiteBundle\Form\Type\WebsiteScopedDataType")</sup> method was changed to `WebsiteScopedDataType::__construct(ManagerRegistry $registry, AclHelper $aclHelper)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/WebsiteBundle/Form/Type/WebsiteScopedDataType.php#L67 "Oro\Bundle\WebsiteBundle\Form\Type\WebsiteScopedDataType")</sup>
* The `WebsiteRepository::getAllWebsites()`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/WebsiteBundle/Entity/Repository/WebsiteRepository.php#L18 "Oro\Bundle\WebsiteBundle\Entity\Repository\WebsiteRepository")</sup> method was changed to `WebsiteRepository::getAllWebsites(Organization $organization = null)`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/4.0.0/src/Oro/Bundle/WebsiteBundle/Entity/Repository/WebsiteRepository.php#L23 "Oro\Bundle\WebsiteBundle\Entity\Repository\WebsiteRepository")</sup>
* The `WebsiteScopedDataType::$websiteProvider`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/WebsiteBundle/Form/Type/WebsiteScopedDataType.php#L43 "Oro\Bundle\WebsiteBundle\Form\Type\WebsiteScopedDataType::$websiteProvider")</sup> property was removed.
* The `TwigSandboxConfigurationPass::process`<sup>[[?]](https://github.com/oroinc/customer-portal/tree/3.1.0/src/Oro/Bundle/WebsiteBundle/DependencyInjection/CompilerPass/TwigSandboxConfigurationPass.php#L21 "Oro\Bundle\WebsiteBundle\DependencyInjection\CompilerPass\TwigSandboxConfigurationPass::process")</sup> method was removed.

